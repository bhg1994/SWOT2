{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport { all, call, fork, put, takeEvery } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { LOAD_USER_FAILURE, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOG_IN_FAILURE, LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_OUT_FAILURE, LOG_OUT_REQUEST, LOG_OUT_SUCCESS, SIGN_UP_FAILURE, SIGN_UP_REQUEST, SIGN_UP_SUCCESS } from '../reducers/user';\n\nfunction logInAPI(loginData) {\n  // 서버에 요청을 보내는 부분\n  let form = new FormData();\n  form.append('email', loginData.id);\n  form.append('password', loginData.password);\n  return axios.post(`http://swot.devdogs.kr:8080/api/auth/signin`, form).then(response => {\n    console.log(\"id,password : \" + loginData.id, loginData.password);\n    console.log('response : ', _JSON$stringify(response, null, 2));\n    var result = response.data;\n    console.log(result.accessToken);\n    return result;\n  }).catch(error => {\n    console.log('failed', error);\n  });\n}\n\nfunction* logIn(action) {\n  try {\n    const result = yield call(logInAPI, action.data);\n    console.log(result.accessToken);\n    yield put({\n      // put은 dispatch 동일\n      type: LOG_IN_SUCCESS\n    });\n    localStorage.setItem(\"accessToken\", result.accessToken);\n    localStorage.setItem(\"refreshToken\", result.refreshToken);\n  } catch (e) {\n    // loginAPI 실패\n    console.error(e);\n    yield put({\n      type: LOG_IN_FAILURE\n    });\n  }\n}\n\nfunction* watchLogIn() {\n  yield takeEvery(LOG_IN_REQUEST, logIn);\n}\n\nfunction signUpAPI(signUpData) {\n  console.log(signUpData); // 서버에 요청을 보내는 부분\n\n  let form = new FormData();\n  form.append('email', signUpData.id);\n  form.append('password', signUpData.password);\n  form.append('name', signUpData.name);\n  form.append('phone', signUpData.telephone);\n  return axios.post(`http://swot.devdogs.kr:8080/api/auth/signup`, form).then(response => {\n    console.log('response : ', _JSON$stringify(response, null, 2));\n  }).catch(error => {\n    console.log('failed', error);\n  });\n}\n\nfunction* signUp(action) {\n  try {\n    // yield call(signUpAPI);\n    yield call(signUpAPI, action.data);\n    yield put({\n      // put은 dispatch 동일\n      type: SIGN_UP_SUCCESS\n    });\n  } catch (e) {\n    // loginAPI 실패\n    console.error(e);\n    yield put({\n      type: SIGN_UP_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchSignUp() {\n  yield takeEvery(SIGN_UP_REQUEST, signUp);\n}\n\nfunction logOutAPI() {\n  // 서버에 요청을 보내는 부분\n  return axios.post('/user/logout', {}, {\n    withCredentials: true\n  });\n}\n\nfunction* logOut() {\n  try {\n    // yield call(logOutAPI);\n    yield call(logOutAPI);\n    yield put({\n      // put은 dispatch 동일\n      type: LOG_OUT_SUCCESS\n    });\n  } catch (e) {\n    // loginAPI 실패\n    console.error(e);\n    yield put({\n      type: LOG_OUT_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchLogOut() {\n  yield takeEvery(LOG_OUT_REQUEST, logOut);\n}\n\nfunction loadUserAPI() {\n  // 서버에 요청을 보내는 부분\n  return axios.get('/user/', {\n    withCredentials: true\n  });\n}\n\nfunction* loadUser() {\n  try {\n    // yield call(loadUserAPI);\n    const result = yield call(loadUserAPI);\n    yield put({\n      // put은 dispatch 동일\n      type: LOAD_USER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    // loginAPI 실패\n    console.error(e);\n    yield put({\n      type: LOAD_USER_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchLoadUser() {\n  yield takeEvery(LOAD_USER_REQUEST, loadUser);\n}\n\nexport default function* userSaga() {\n  yield all([fork(watchLogIn), fork(watchLogOut), fork(watchLoadUser), fork(watchSignUp)]);\n}","map":{"version":3,"sources":["C:\\Users\\6201-20\\SWOT2\\sagas\\user.js"],"names":["all","call","fork","put","takeEvery","axios","LOAD_USER_FAILURE","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOG_IN_FAILURE","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_OUT_FAILURE","LOG_OUT_REQUEST","LOG_OUT_SUCCESS","SIGN_UP_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","logInAPI","loginData","form","FormData","append","id","password","post","then","response","console","log","result","data","accessToken","catch","error","logIn","action","type","localStorage","setItem","refreshToken","e","watchLogIn","signUpAPI","signUpData","name","telephone","signUp","watchSignUp","logOutAPI","withCredentials","logOut","watchLogOut","loadUserAPI","get","loadUser","watchLoadUser","userSaga"],"mappings":"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","sourcesContent":["import {\n    all,\n    call,\n    fork,\n    put,\n    takeEvery\n} from 'redux-saga/effects';\nimport axios from 'axios';\nimport {\n    LOAD_USER_FAILURE,\n    LOAD_USER_REQUEST,\n    LOAD_USER_SUCCESS,\n    LOG_IN_FAILURE,\n    LOG_IN_REQUEST,\n    LOG_IN_SUCCESS,\n    LOG_OUT_FAILURE,\n    LOG_OUT_REQUEST,\n    LOG_OUT_SUCCESS,\n    SIGN_UP_FAILURE,\n    SIGN_UP_REQUEST,\n    SIGN_UP_SUCCESS,\n} from '../reducers/user';\n\nfunction logInAPI(loginData) {\n    // 서버에 요청을 보내는 부분\n    let form = new FormData()\n    form.append('email', loginData.id)\n    form.append('password', loginData.password)\n\n    return axios.post(`http://swot.devdogs.kr:8080/api/auth/signin`, form)\n        .then(response => {\n            console.log(\"id,password : \" + loginData.id, loginData.password);\n            console.log('response : ', JSON.stringify(response, null, 2));\n            var result = response.data;\n            console.log(result.accessToken);\n            return result;\n        })\n        .catch(error => {\n            console.log('failed', error)\n        })\n}\n\nfunction* logIn(action) {\n    try {\n        const result = yield call(logInAPI, action.data);\n        console.log(result.accessToken);\n        yield put({ // put은 dispatch 동일\n            type: LOG_IN_SUCCESS,\n        });\n        localStorage.setItem(\"accessToken\",result.accessToken);\n        localStorage.setItem(\"refreshToken\",result.refreshToken);\n    } catch (e) { // loginAPI 실패\n        console.error(e);\n        yield put({\n            type: LOG_IN_FAILURE,\n        });\n    }\n}\n\nfunction* watchLogIn() {\n    yield takeEvery(LOG_IN_REQUEST, logIn);\n}\n\nfunction signUpAPI(signUpData) {\n    console.log(signUpData);\n    // 서버에 요청을 보내는 부분\n    let form = new FormData()\n    form.append('email', signUpData.id)\n    form.append('password', signUpData.password)\n    form.append('name', signUpData.name)\n    form.append('phone', signUpData.telephone)\n\n    return axios.post(`http://swot.devdogs.kr:8080/api/auth/signup`, form)\n        .then(response => {\n            console.log('response : ', JSON.stringify(response, null, 2))\n        })\n        .catch(error => {\n            console.log('failed', error)\n        })\n}\n\nfunction* signUp(action) {\n    try {\n        // yield call(signUpAPI);\n        yield call(signUpAPI, action.data);\n        yield put({ // put은 dispatch 동일\n            type: SIGN_UP_SUCCESS,\n        });\n    } catch (e) { // loginAPI 실패\n        console.error(e);\n        yield put({\n            type: SIGN_UP_FAILURE,\n            error: e,\n        });\n    }\n}\n\nfunction* watchSignUp() {\n    yield takeEvery(SIGN_UP_REQUEST, signUp);\n}\n\nfunction logOutAPI() {\n    // 서버에 요청을 보내는 부분\n    return axios.post('/user/logout', {}, {\n        withCredentials: true,\n    });\n}\n\nfunction* logOut() {\n    try {\n        // yield call(logOutAPI);\n        yield call(logOutAPI);\n        yield put({ // put은 dispatch 동일\n            type: LOG_OUT_SUCCESS,\n        });\n    } catch (e) { // loginAPI 실패\n        console.error(e);\n        yield put({\n            type: LOG_OUT_FAILURE,\n            error: e,\n        });\n    }\n}\n\nfunction* watchLogOut() {\n    yield takeEvery(LOG_OUT_REQUEST, logOut);\n}\n\nfunction loadUserAPI() {\n    // 서버에 요청을 보내는 부분\n    return axios.get('/user/', {\n        withCredentials: true,\n    });\n}\n\nfunction* loadUser() {\n    try {\n        // yield call(loadUserAPI);\n        const result = yield call(loadUserAPI);\n        yield put({ // put은 dispatch 동일\n            type: LOAD_USER_SUCCESS,\n            data: result.data,\n        });\n    } catch (e) { // loginAPI 실패\n        console.error(e);\n        yield put({\n            type: LOAD_USER_FAILURE,\n            error: e,\n        });\n    }\n}\n\nfunction* watchLoadUser() {\n    yield takeEvery(LOAD_USER_REQUEST, loadUser);\n}\n\nexport default function* userSaga() {\n    yield all([\n        fork(watchLogIn),\n        fork(watchLogOut),\n        fork(watchLoadUser),\n        fork(watchSignUp),\n    ]);\n}"]},"metadata":{},"sourceType":"module"}